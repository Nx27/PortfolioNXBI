@inject HttpClient Http

<div class="ProjectPreview">
  <h3>@Title</h3>
  <div class="ProjectPreviewContent">
    @foreach (var project in Projects)
    {
      <div class="ProjectCard">
        <ProjectPreviewCard Data="@project" />
      </div>
    }
  </div>
</div>

@code {
  [Parameter]
  public List<ProjectData?> Projects { get; set; } = new();
  [Parameter] public string Title { get; set; } = "My Projects";

  protected override async Task OnInitializedAsync()
  {
    //THE MANIFEST CANT HAVE LESS THAN THREE PROJECTS
    var manifest = await Http.GetFromJsonAsync<List<string>>("json/ProjectManifest.json");

    if (manifest != null)
    {
      var contentUrls = manifest.Where(x => !string.IsNullOrEmpty(x)).Select(x => x.Trim());

      // Fix: Await all tasks and assign the result to Projects
      var projectTasks = contentUrls.Select(url => Http.GetFromJsonAsync<ProjectData>($"{url}")).ToList();
      Projects = (await Task.WhenAll(projectTasks)).ToList();

      // Remove the following block if you only want to load all projects from manifest
      // If you want to keep only the first 3 projects, use:
      // Projects = Projects.Take(3).ToList();
    }
  }
}
